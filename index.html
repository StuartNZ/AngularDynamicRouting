<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Angular Dynamic Routing by gregorypratt</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Angular Dynamic Routing</h1>
          <h2>1 route, many views</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/gregorypratt/AngularDynamicRouting/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/gregorypratt/AngularDynamicRouting/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/gregorypratt/AngularDynamicRouting" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <p>Dynamic routing is 1 route, many views. It adapts to the pages that are available within your application. Did doesn't need config changes when new HTML partials are added.</p>

<h1>Routing in AngularJS</h1>

<h2><em>1 route, 1 view</em></h2>

<p><em>Go to <a href="http://angularjs.org">http://angularjs.org</a> for more information</em></p>

<p>Routing is a way of controlling 'deep-linking' and specifying which controllers and views (HTML partials) AngularJS should execute and serve to the page. AngularJS automatically watches <code>$location.url()</code> and tries to map the path to an existing route definition.</p>

<p>You can define routes through the <code>$routeProvider</code> API like this:</p>

<pre><code>angular.module('project', ['mongolab']).
  config(function($routeProvider) {
    $routeProvider.
      when('/', {controller:ListCtrl, templateUrl:'list.html'}).
      when('/edit/:projectId', {controller:EditCtrl, templateUrl:'detail.html'}).
      when('/new', {controller:CreateCtrl, templateUrl:'detail.html'}).
      otherwise({redirectTo:'/'});
  });
</code></pre>

<p>The <code>$route</code> service is typically used in conjunction with the <code>ngView</code> directive and the <code>$routeParams</code> service. Simply add the <code>ng-view</code> boolean attribute to the HTML element that you wish to use to populate with your partial HTML file contents.</p>

<p>In the above example if the URL changes to <code>domain.com/#/new</code> then Angular picks up this change, matches the URL fragment with the condtion and inserts the contents of <code>detail.html</code> into the element with the <code>ng-view</code> attribute, and executes the code in <code>CreateCtrl</code> controller function.</p>

<p><em>Download a copy of <a href="https://github.com/angular/angular-seed">https://github.com/angular/angular-seed</a> (which this project is based on) to see standard routing in action.</em></p>

<h1>Dynamic Routing</h1>

<h2><em>1 route, many views</em></h2>

<p>Routing is great, although slight overhead with it is when you add new parital views, you have to add code to the route config. </p>

<p><strong>But wouldn't it be nice to add pages and never have to touch the route config again?!</strong></p>

<h3>Config</h3>

<p>First we have to specify a generic route:</p>

<pre><code>$routeProvider.when('/:name', { templateUrl: 'partials/blank.html', controller: PagesController });
</code></pre>

<ul>
<li>The <code>name</code> parameter is stored as a route parameter.</li>
<li>The <code>templateUrl</code> points to a blank file.</li>
<li>The <code>controller</code> is set to PagesController.</li>
</ul><p>Now when the URL changes and we get <code>domain.com/#/new</code> the PageController will execute.</p>

<h3>Controller</h3>

<pre><code>function PagesController($scope, $http, $route, $routeParams, $compile) {
  $route.current.templateUrl = 'partials/' + $routeParams.name + ".html";

  $http.get($route.current.templateUrl).then(function (msg) {
    $('#views').html($compile(msg.data)($scope));
  });
}
PagesController.$inject = ['$scope', '$http', '$route', '$routeParams', '$compile'];
</code></pre>

<p>Right, what's going on in here?</p>

<ul>
<li>Firstly the current template URL is set to a custom value based on the stored route parameter ("new" in our example).</li>
<li>Then using the templateUrl value we <code>$http.get()</code> the contents of the HTML file.</li>
<li>The HTML might include some <code>{{bindings}}</code> and Angular-esq code that needs "compiling" by Angular, so that's exactly what we do. <code>$compile(msg.data)($scope)</code> runs Angular over the new HTML.</li>
<li>The last part is to insert the new HTML into the <code>ng-views</code> element. We've added an ID of "views" to the element to make selecting it easier.</li>
</ul><h3>Hey presto!</h3>

<p>At this point the PagesController will have updated the page by inserting the contents of <code>partials/new.html</code>. Wicked!</p>

<h1>Play</h1>

<p>Download this project (which is based on <a href="https://github.com/angular/angular-seed">https://github.com/angular/angular-seed</a>), get it up and running and then try adding new pages to the partials directory. Hopefully with any luck you won't need to touch the route config to see your newly added page.</p>

<h1>Support or Contact</h1>

<p>Found a problem? Submit an issue.</p>

<p>Having trouble with Github? Contact <a href="mailto:support@github.com">support@github.com</a>.</p>
        </section>

        <footer>
          Angular Dynamic Routing is maintained by <a href="https://github.com/gregorypratt">gregorypratt</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>